# otel-collector-config.yaml â€” OTel Collector sidecar on pyapp1
#
# Receives gRPC from the Apache OTel module on localhost:4317
# and exports via OTLP/HTTP to OCI APM.
#
# Usage:
#   otelcol --config /opt/otel-collector/otel-collector-config.yaml

receivers:
  otlp:
    protocols:
      grpc:
        endpoint: "0.0.0.0:4317"

processors:
  batch:
    timeout: 5s
    send_batch_size: 512

exporters:
  otlphttp:
    endpoint: "https://<APM_DOMAIN>.apm-agt.<REGION>.oci.oraclecloud.com"
    headers:
      Authorization: "dataKey <YOUR_PRIVATE_DATA_KEY>"
    traces_endpoint: "https://<APM_DOMAIN>.apm-agt.<REGION>.oci.oraclecloud.com/20200101/opentelemetry/v1/traces"

service:
  pipelines:
    traces:
      receivers: [otlp]
      processors: [batch]
      exporters: [otlphttp]
